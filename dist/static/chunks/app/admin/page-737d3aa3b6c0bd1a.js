(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{21923:function(e,s,n){Promise.resolve().then(n.bind(n,68209))},68209:function(e,s,n){"use strict";n.r(s);var r=n(3827),t=n(64090),a=n(54457),i=n(7908);n(74123);var u=n(37780),o=n(47907);s.default=function(){let[e,s]=(0,t.useState)({}),[n,l]=(0,t.useState)(!1),c=(0,o.useRouter)(),[d,m]=(0,a.fP)(["token"]),h=d.token,p=async e=>{e.preventDefault();let n=e.target,r=n.username.value,t=n.password.value,a=n.code.value;try{let e=await i.Z.post("".concat(u.F,"/auth/login"),{username:r,password:t,code:a});if(200===e.status){let s=e.data.token,n=e.data.userId;m("token",s,{path:"/",maxAge:86400,secure:!0}),m("user_id",n,{path:"/",maxAge:86400,secure:!0}),l(!0),setTimeout(()=>{c.push("/admin/wr")},2e3)}}catch(e){e.response?console.error("Error:",e.response):console.error("Error:",e),s({name:"login",message:"Invalid credentials"})}},x=(0,r.jsx)("div",{className:"form",children:(0,r.jsx)("form",{onSubmit:p,children:h?(0,r.jsx)("div",{children:"You are already logged in."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"input-container",children:[(0,r.jsx)("label",{children:"Username "}),(0,r.jsx)("input",{type:"text",name:"username",required:!0})]}),(0,r.jsxs)("div",{className:"input-container",children:[(0,r.jsx)("label",{children:"Password "}),(0,r.jsx)("input",{type:"password",name:"password",required:!0})]}),(0,r.jsxs)("div",{className:"input-container",children:[(0,r.jsx)("label",{children:"Confidential Code "}),(0,r.jsx)("input",{type:"number",name:"code",required:!0})]}),(0,r.jsx)("div",{className:"button-container",children:(0,r.jsx)("input",{type:"submit"})})]})})});return(0,r.jsx)("div",{className:"app",children:(0,r.jsxs)("div",{className:"login-form",children:[(0,r.jsx)("div",{className:"title",children:"Connexion"}),n?(0,r.jsx)("div",{children:"User is successfully logged in"}):(0,r.jsxs)("div",{children:["login"===e.name&&(0,r.jsx)("div",{className:"error",children:e.message}),x]})]})})}},47907:function(e,s,n){"use strict";var r=n(15313);n.o(r,"useParams")&&n.d(s,{useParams:function(){return r.useParams}}),n.o(r,"useRouter")&&n.d(s,{useRouter:function(){return r.useRouter}})},37780:function(e,s,n){"use strict";n.d(s,{F:function(){return r}});let r="http://localhost:80"},74123:function(){}},function(e){e.O(0,[457,908,971,69,744],function(){return e(e.s=21923)}),_N_E=e.O()}]);